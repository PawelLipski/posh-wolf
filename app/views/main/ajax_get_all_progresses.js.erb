$("#ajax-status").append('<br>Progress: <%= @all_progresses.to_s %>')

<% 
puts @all_progresses[:item] 

p = @all_progresses[:item] 
p = [ p ] unless p.kind_of?(Array)

puts p.to_json  
%>

tasks = <%= raw(p.to_json) %>

for (i = 0; i < tasks.length; i++) {

  task = tasks[i]
  pbId = "#progressbar-" + task.id
  trId = "#tr-" + task.id


  if (task.progress == '100') {
    $(pbId).progressbar({value: 100})
    delete taskIds[parseInt(task.id)]
    $(pbId).hide(1000)
  } else {
    $(pbId).progressbar({value: parseInt(task.progress) * 3})   
    $(pbId + ' .ui-progressbar-value').css({"transition": "width 0.5s", "-webkit-transition": "width 0.5s"})
  }
}   

